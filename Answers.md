## سوال اول: در بخش Embedded تمرین چگونه میتوان بلوتوث را جایگزین RFID کرد؟ راه حل خود را شرح دهید.
برای این کار ابتدا باید ماژول بلوتوث مناسب را انتخاب کنیم که با آردوینو متناسب باشد و همچنین از پروتکل BLE یا bluetooth low energy پشتیبانی کند. HM-10 و HM-11 گزینه های محبوبی هستند. 

گام بعدی setup کردن سخت افزار است. ماژول RFID را از setup آردوینو برمیداریم و ماژول بلوتوث را جایگزین کرده و یا پین گذاری مناسب، اتصال را برقرار میکنیم. برای این پین گذاری از دیتاشیت ماژول استفاده میکنیم.

سپس نویت برنامه نویسی است. برای آردوینو یک اسکچ جدید مینویسیم که در آن ابتدا ماژول بلوتوث را initialize و تنظیمات اتصال BLE را پیکربندی کند. سپس برای کشف دستگاه های بلوتوث اطراف اسکن کند و کانکشن را برقرار کند. 

همچنین نیاز داریم یک پروتکل ارتباطی بین آردوینو و دستگاه بلوتوث implement کنیم که شامل ارسال و دریافت پکت های داده، حاوی اطلاعات user authentication باشد 

در نهایت هم دیتای دریافتی را پراسس و validate کند و اقدامات بعدی را دستور دهد. 


## سوال دوم: آیا میتوان بدون نیاز به pair کردن ماژولهای بلوتوث اطالعات الزم )شناسه فرد( را بین آنها جابجا کرد؟ توضیح دهید.
بله ما میتوانیم دیتا را بدون pair کردن میان ماژول های بلوتوث جابجا کنیم. خاصتا در پروتکل BLE این اقدام امکان پذیر است. BLE از دو نوع ارتباط پشتیبانی میکند: advertising و connections

مود advertising: در این مود، دستگاه BLE به صورت دوره ای پکت های حاوی داده را برادکست میکند. این پکت ها میتوانند توسط هر دستگاه BLE دیگری که در نزدیکی باشد، کشف شوند. ما میتوانیم یک ماژول بلوتوث را به گونه ای پیکربندی کنیم که دیتا حاوی اطلاعات user authentication را advertise کند و دیگر ماژول را طوری پیکربندی کنیم که برای advertisementهای اطراف اسکن کند و دیتا را جمع آوری کند.

مود connections: پروتکل BLE این اجازه را میدهد که دستگاه ها بدون نیاز به جفت شدن، باهم اتصال برقرار کنند. به این نوع اتصال bonding میگویند. لکن باید در نظر داشت که این جنس اتصال در موقعیتهایی کاربری بیشتری دارد که امنیت مورد نیاز در کار، سطح به نسبت پایینی دارد. مثلا transmit کردن داده های سنسور یا دستورات کنترلی بین دستگاه ها. 

برای یک سیستم IOT ما میتوانیم هردو این مودها را بسته به نوع مسئله درنظر بگیریم. 

## سوال سوم: با فرض استفاده از بلوتوث چه راهکاری را برای جایگزینی استفاده از تایمر برای بسته شدن ورودی شرکت پیشنهاد میکنید؟ توضیح دهید.

با جایگزین کردن بلوتوث به جای RFID، روشهای مختلفی برای مدیریت بستن در میتوان درنظر گرفت که در ادامه به برخی از آنها اشاره میکنیم: 

- راهکار اول) Timestamp Exchange: در این روش به جای استفاده از تایمر، زمانی که در باز است تایم استمپها را میان ماژول بلوتوث و سرور جا به جا میکنیم. زمانی که سرور یک یوزر را تایید کند، این پکت حاوی تایم استمپ است. آردوینو این تایم استمپ را با زمان حال به صورت دوره ای مقایسه میکند و زمانی که 30 ثانیه تمام شود، در را میبندد. 

- راهکار دوم) Heartbeet Signal: یک سیگنال دوره ای مانند ضربان قلب implement میکنیم که آردوینو با استفاده از بلوتوث برای سرور ارسال میکند. وقتی در باز است، آردوینو سیگنال را در بازه های زمانی عادی مثلا هر 10 ثانیه، به سرور ارسال میکند که به معنای بز بودن در است. وقتی سرور دیگر این پیام را دریافت نکند، مثلا 3 بازه زمانی یعنی 30 ثانیه بگذرد و ضربان را دریافت نکند، متوجه میشود که در باید بسته شود. پس این دستور را به آردوینو میفرستد. 

